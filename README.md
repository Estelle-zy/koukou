# koukou
单体SpringBoot应用，目前有统一日志管理、权限认证、Redis存取功能、文件上传下载的实现

@[TOC](交互引导功能通用组件开发需求文档)

# 文档说明

## 文档简介

本文档主要描述**通用交互引导组件开发的功能需求点及其设计**，目的在于清晰地定义各模块的需求细节及逻辑流程。
## 文档读者
本文档主要面向以下读者：研发人员、测试人员、产品经理等。
# 组件简介
适当的“引导”让用户在较短的时间快捷、清楚的了解功能，减少摸索时间，降低使用门槛。
简单的设计、清晰的引导。
主要受众为所有登录用户。
# 概要设计
## 模块划分
**主要分为以下模块**：
![在这里插入图片描述](https://img-blog.csdnimg.cn/e1c3be8f118845158b3f3268675fe9d2.png#pic_center)
**总体流程图**：
![在这里插入图片描述](https://img-blog.csdnimg.cn/55a672d37d9d41b8af668feef637f987.png)
## 详细设计
### 接口1:登录功能
#### 界面设计
**登录页面预期效果图**
![在这里插入图片描述](https://img-blog.csdnimg.cn/603a948da78a421a90d240375445c3ff.png)
**主页预期效果图**
![在这里插入图片描述](https://img-blog.csdnimg.cn/c2bbc9706428455d9ecb886b35a9b815.png)
**密码重置页效果图**
![在这里插入图片描述](https://img-blog.csdnimg.cn/cde51421b44c44689b3066bdc0d016d4.png)

#### 登录流程
![在这里插入图片描述](https://img-blog.csdnimg.cn/dd4c9d6c85a6449db48defced1affb3a.png)
#### 登录功能类图
![在这里插入图片描述](https://img-blog.csdnimg.cn/06689183ba1f42b49b11ad1cdcfe537e.png)
**接口设计说明：**
1、用户在页面输入用户名username和密码password（数据验证小提示：不能为空）
若参数符合规则，点击登录，以post方式提交用户名和密码。
2、后台获取参数username和password：连接数据库，将接收到的用户名和密码在库表中进行查找，如果没有找到，弹窗提示用户未注册
如果找到，且用户名和密码一致，弹出“登录成功”，跳转至主页
如果找到，但用户名或密码不一致，弹出“登录失败-用户名或密码有误”，停留在登录页，重新登录

#### 用户登录数据库设计
![在这里插入图片描述](https://img-blog.csdnimg.cn/b26fd4d483774661888c6d5b429f5e03.png)
|column|  type|type|explain|
|--|--|--|--|
| id |  int| 主键|每个用户的唯一表示|
| username|  String| 非空|用户名|
| password|  String| 非空|密码|
| cnt|  int| 可选字段|登录失败次数|
| lock|  int| 可选字段|今日是否锁定|
| time|  date| 可选字段|引导的时间戳|

**额外扩展功能：**
记录登录失败次数cnt，如果cnt大于设定值，则今日锁定，无法再次登录。

### 接口2：密码重置功能

#### 密码重置流程
![在这里插入图片描述](https://img-blog.csdnimg.cn/167b409de1e24e9e9202d1e935afa344.png)

#### 密码重置功能类图
![在这里插入图片描述](https://img-blog.csdnimg.cn/781ee348a075436d976f83032f8ec0cf.png)

**接口设计说明：**
1、用户在页面输入原密码oldPassword、新密码newPassword、二次新密码newPassword2
点击修改按钮，以post方式提交参数oldPassword、newPassword、newPassword2。
2、后台获取参数User、oldPassword、newPassword、newPassword2，判断旧密码是否与当前User的密码一直，否则提示旧密码错误；是则判断两次新密码是否一致，否则提示两次新密码不一致，是则，连接数据库，更新当前User的密码为新密码，修改成功后跳转至登录页，重新登录。

#### 密码重置数据库设计
同密码登录数据库设计一致
### 接口3：引导功能
 **难点1：**我们需要在一个正常流程中插入一段引导功能代码，且不能影响正常流程.....
 **难点2：**界面和需求的变化，会导致引导功能骤变，所以需要做一个通用的，不能固定对应的区域

 目前我计划的引导功能的编程方式希望有以下几点：
1、引导功能要分离
2、如果界面值发生简单的UI移位、size变化，不需要修改引导功能代码
3、定位UI引导的区域应尽可能简单，能自适应不同的屏幕尺寸

不同的页面，引导内容不同，所以需要有一个引导配置的文件guide_task.js：

```
name: 引导任务名字
steps：[
	{
		desc: 引导步骤x（点击位置）
		command: {cmd: 引导指令（按钮的话可以是手指、光标等、、）, args: css选择器，UI}
	},
	{
		desc: 引导步骤x（文本解释）
		command: {cmd: 引导指令（解释可以用text显示）, args: 引导步骤x}
	},
	......
]
```

**解释**：其中的 desc 是引导步骤的描述，，command是引导指令，比如手指指示指令：finger, 后面的args是指令参数，借助CSS中的选择器概念，
**怎么获取指定的UI区域？** 这里暂时考虑使用目标节点的路径表示字符串。
如：Home > main_btns > btn_home

